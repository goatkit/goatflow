services:
  playwright:
    image: mcr.microsoft.com/playwright:v1.55.1-jammy
    container_name: goatflow-playwright
    user: "${HOST_UID:-1000}:${HOST_GID:-1000}"
    networks:
      - goatflow-network
    volumes:
      - ./:/workspace
      - goatflow_node_modules:/workspace/node_modules
      - goatflow_cache:/cache
    working_dir: /workspace
    command: tail -f /dev/null  # Keep container running
    environment:
      - PLAYWRIGHT_BROWSERS_PATH=/ms-playwright
      - BUN_INSTALL_CACHE_DIR=/cache/bun
      - XDG_CACHE_HOME=/cache/xdg
      - NODE_ENV=test

networks:
  goatflow-network:
    external: true
    name: goatflow_goatflow-network

volumes:
  goatflow_node_modules:
  goatflow_cache: